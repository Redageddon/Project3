@model API.DataModels.Food.MealsModel

@{
    ViewData["Title"] = Model.Name ?? "Meal";
}

@section Styles
{
    <link rel="stylesheet" href="~/css/Meals.css" />
    <link rel="stylesheet" href="/css/Cards.css" />
}

<div class="meals-detail-page py-3">
    <div class="container">
        <header class="meals-detail-header mb-4">
            <h1 class="h3 mb-1">@Model.Name</h1>
            <p class="text-muted mb-0">
                Created by user @Model.UserId
            </p>
        </header>

        @if (Model.Dishes is { Count: > 0 })
        {
            <section class="meals-detail-section mb-4">
                <h2 class="h5 mb-3">Dishes</h2>
                <div class="row g-3">
                    @foreach (var recipe in Model.Dishes!)
                    {
                        <div class="col-md-6 col-lg-4">
                            @await Html.PartialAsync("~/Views/Shared/_RecipeCard.cshtml", recipe)
                        </div>
                    }
                </div>
            </section>
        }

        @if (Model.Drinks is { Count: > 0 })
        {
            <section class="meals-detail-section mb-4">
                <h2 class="h5 mb-3">Drinks</h2>
                <div class="row g-3">
                    @foreach (var recipe in Model.Drinks!)
                    {
                        <div class="col-md-6 col-lg-4">
                            @await Html.PartialAsync("~/Views/Shared/_RecipeCard.cshtml", recipe)
                        </div>
                    }
                </div>
            </section>
        }

        @if (Model.Desserts is { Count: > 0 })
        {
            <section class="meals-detail-section mb-4">
                <h2 class="h5 mb-3">Desserts</h2>
                <div class="row g-3">
                    @foreach (var recipe in Model.Desserts!)
                    {
                        <div class="col-md-6 col-lg-4">
                            @await Html.PartialAsync("~/Views/Shared/_RecipeCard.cshtml", recipe)
                        </div>
                    }
                </div>
            </section>
        }

        @if ((Model.Dishes is null || Model.Dishes.Count == 0) &&
             (Model.Drinks is null || Model.Drinks.Count == 0) &&
             (Model.Desserts is null || Model.Desserts.Count == 0))
        {
            <p class="text-muted">
                This meal does not contain any recipes yet.
            </p>
        }
    </div>
</div>
