@using API.DataModels.Food
@model API.DataModels.Food.MealsModel

@{
ViewData["Title"] = Model.Name ?? "Meal";
}

@section Styles {
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="~/css/MealDetails.css" />
    <link rel="stylesheet" href="~/css/Cards.css" />
}

<div class="meal-details-page">
    <div class="meal-details-shell">
        <header class="meal-details-header">
            <div class="meal-details-heading">
                <h1 class="meal-details-title">@Model.Name</h1>
                <p class="meal-details-subtitle">
                    Created by user @Model.UserId
                </p>
            </div>

            <div class="meal-details-meta">
                <div class="meal-details-meta-pill">
                    <span class="meal-details-meta-label">Dishes</span>
                    <span class="meal-details-meta-value">
                        @(Model.Dishes?.Count ?? 0)
                    </span>
                </div>
                <div class="meal-details-meta-pill">
                    <span class="meal-details-meta-label">Drinks</span>
                    <span class="meal-details-meta-value">
                        @(Model.Drinks?.Count ?? 0)
                    </span>
                </div>
                <div class="meal-details-meta-pill">
                    <span class="meal-details-meta-label">Desserts</span>
                    <span class="meal-details-meta-value">
                        @(Model.Desserts?.Count ?? 0)
                    </span>
                </div>
            </div>
        </header>

        <div class="meal-details-body meal-details-body-grid">
            @if (Model.Dishes is not null && Model.Dishes.Any())
            {
                <section class="meal-details-section meal-details-section--dishes">
                    <h2 class="meal-details-section-title">Dishes</h2>
                    <div class="meal-details-card-grid">
                        @foreach (RecipeModel recipe in Model.Dishes)
                        {
                            <div class="meal-details-card-wrap">
                                @await Html.PartialAsync("_RecipeCard", recipe)
                            </div>
                        }
                    </div>
                </section>
            }

            @if (Model.Drinks is not null && Model.Drinks.Any())
            {
                <section class="meal-details-section meal-details-section--drinks">
                    <h2 class="meal-details-section-title">Drinks</h2>
                    <div class="meal-details-card-grid">
                        @foreach (RecipeModel recipe in Model.Drinks)
                        {
                            <div class="meal-details-card-wrap">
                                @await Html.PartialAsync("_RecipeCard", recipe)
                            </div>
                        }
                    </div>
                </section>
            }

            @if (Model.Desserts is not null && Model.Desserts.Any())
            {
                <section class="meal-details-section meal-details-section--desserts">
                    <h2 class="meal-details-section-title">Desserts</h2>
                    <div class="meal-details-card-grid">
                        @foreach (RecipeModel recipe in Model.Desserts)
                        {
                            <div class="meal-details-card-wrap">
                                @await Html.PartialAsync("_RecipeCard", recipe)
                            </div>
                        }
                    </div>
                </section>
            }

            @if ((Model.Dishes is null || !Model.Dishes.Any())
              && (Model.Drinks is null || !Model.Drinks.Any())
              && (Model.Desserts is null || !Model.Desserts.Any()))
            {
                <section class="meal-details-section">
                    <p class="meal-details-empty">
                        This meal doesnâ€™t have any recipes yet.
                    </p>
                </section>
            }
        </div>
    </div>
</div>
